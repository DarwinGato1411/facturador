<ion-header>
  <ion-toolbar>
    <ion-title>Lista Facturas</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>

  <div class="fechaBusqueda">
    <ion-item>
      <ion-label>Inicio:</ion-label>
      <ion-datetime displayFormat="YYYY MM DD" [formControl]="fechaInicio"></ion-datetime>
    </ion-item>
    <ion-item>
      <ion-label>Fin:</ion-label>
      <ion-datetime displayFormat="YYYY MM DD" [formControl]="fechaFinal"></ion-datetime>
    </ion-item>
    <ion-button (click)="buscarFacturaPorFecha()">Buscar Factura</ion-button>
  </div>

  <div class="contenedorCliente">
    <div class="item-Cliente" *ngFor="let usu of listafacturas">


      <div *ngIf="usu.estadosri==='AUTORIZADO' ; else elseBlock" class="header verde">
        <p > {{usu.idCliente.cliNombre}}</p>
        <p > Factura Nº: {{usu.facNumeroText}}</p>
      </div>
      <ng-template #elseBlock>
        <div class="header rojo">
          <p > {{usu.idCliente.cliNombre}}</p>
          <p > Factura Nº: {{usu.facNumeroText}}</p>
        </div>
      </ng-template>

      <div class="content">
        <p> <strong> Clave de acceso: </strong> {{usu.facClaveAcceso}}</p>
        <p> <strong> {{usu.idCliente.idTipoIdentificacion.tidNombre}}:</strong> {{usu.idCliente.cliCedula}} </p>
        <p> <strong> Correo: </strong> {{usu.idCliente.cliCorreo}}</p>
        <p ><strong>Fecha emisión:</strong> {{usu.facFecha}}</p>
        <p > <strong> Fecha autorización:</strong> {{usu.facFechaAutorizacion |
          date:'yyyy-MM-dd'}}</p>
        <p ><strong>Estado:</strong> {{usu.estadosri}} </p>
        <p > <strong> TOTAL FACTURA:</strong> {{usu.facTotal}} </p>
      </div>
      <ion-button *ngIf="usu.estadosri!=='AUTORIZADO'" (click)=" autorizarFactura(usu)" target="_blank" expand="block">
        <ion-icon name="send"></ion-icon>
        <div>Mandar autorizar SRI</div>
      </ion-button>

    </div>


  </div>
</ion-content>